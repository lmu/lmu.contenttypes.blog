<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="lmu.contenttypes.blog" >
<body>

<metal:main fill-slot="content">
  <metal:content define-macro="content"
                 tal:define="toLocalizedTime nocall:context/@@plone/toLocalizedTime;
                             real_object python:context.aq_explicit;
                             isAnon context/@@plone_portal_state/anonymous;
                             normalizeString nocall: context/plone_utils/normalizeString;
                             site_properties context/portal_properties/site_properties;
                             use_view_action site_properties/typesUseViewActionInListings|python:();
                             show_about python:not isAnon or site_properties.allowAnonymousViewAbout;
                             navigation_root_url context/@@plone_portal_state/navigation_root_url;
                             pas_member context/@@pas_member;
                             item_creator context/Creator;
                             item_created context/CreationDate;
                             item_type context/portal_type;
                             item_effective context/EffectiveDate;
                             item_display_date python: item_effective != 'None' and item_effective or item_created;
                             item_url context/getURL|context/absolute_url;
                             item_state context/@@plone_context_state/workflow_state;
                             show_border context/@@plone/showEditableBorder;
                             show_border python:show_border and not ajax_load">
  <main id="content" class="blog"
        tal:attributes="class python:show_border and 'blog documentEditable' or 'blog'">

    <div class="row helper-margin-top-l">
      <div class="columns small-12 large-10 large-centered" >

        <div id="edit-bar"
             tal:condition="show_border"
             tal:content="structure provider:plone.contentviews" />

        <div metal:use-macro="context/global_statusmessage/macros/portal_message">
            Status message
        </div>

      </div>
    </div>

    <div class="row">
      <article class="blog columns small-12 large-10 large-centered helper-margin-top-m">

          <div class="document-actions"
               tal:condition="python: True and (view.isOwner() or view.isReviewer() or view.isManager())">

            <a tal:attributes="href string:${context/absolute_url}/report_blog_entry"
               tal:condition="nothing"
               class="button link-overlay small"
               id="report-button"
               title="Report Blog Entry"
               i18n:attributes="title"
               i18n:translate="" >Report Blog Entry</a>

            <a tal:attributes="href string:${context/absolute_url}/edit"
               tal:condition="view/can_edit"
               class="button link-overlay small"
               title="Edit Blog Entry"
               i18n:attributes="title"
               i18n:translate="" >Edit Blog Entry</a>

            <a tal:attributes="href string:${context/absolute_url}/delete_confirmation"
               tal:condition="view/can_remove"
               class="button link-overlay small"
               title="Delete Blog Entry"
               i18n:attributes="title"
               i18n:translate="" >Delete Blog Entry</a>

            <a tal:attributes="href string:${context/absolute_url}/content_status_modify?workflow_action=publish_internally"
               tal:condition="view/can_publish"
               class="button link-overlay small"
               title="Publish"
               i18n:attributes="title"
               i18n:translate="" >Publish</a>

            <a tal:attributes="href string:${context/absolute_url}/content_status_modify?workflow_action=reject"
               tal:condition="view/can_set_private"
               class="button link-overlay small"
               title="Set Private"
               i18n:attributes="title"
               i18n:translate="" >Set Private</a>

<div tal:condition="nothing">
            <a tal:attributes="href string:${context/absolute_url}/content_status_modify?workflow_action=banned"
               tal:condition="view/can_lock"
               class="button link-overlay small"
               title="Report Blog Entry"
               i18n:translate=""
               i18n:attributes="title" >Sperren</a>
</div>
          </div>

        <div class="blog-preview-counter" >
          <a class="comment-sign"
             title="Jump to Comments"
             tal:attributes="href python:str(context.absolute_url())+'#commenting';"
             i18n:attributes="title lable_jump_to_comments">
            <span tal:content="context/get_discussion_count" >Anzahl</span>
          </a>
        </div>
        <hgroup class="helper-margin-top-m helper-margin-bottom-l">
          <h1 tal:content="context/title">Blog Entry Title</h1>
          <div class="tileDocumentByLine documentByLine helper-font-serif helper-margin-top-m"
               tal:condition="python: site_properties.allowAnonymousViewAbout or not isAnon"
               tal:define="author python:pas_member.info(item_creator);">
            <a href="#"
               tal:define="external_url author/home_page;
                           default_url string:${navigation_root_url}/author/${item_creator};
                           href_url python: external_url if external_url else default_url;"
               tal:attributes="href href_url;"
               tal:content="author/name_or_id">
                  Bob Dobalina
            </a>
            <date tal:content="python: toLocalizedTime(item_display_date,long_format=1)">Date</date>
            <em tal:condition="python: item_state != 'internally_published'" i18n:translate="">Dieser Blog-Beitrag ist noch nicht veroeffentlicht</em>
          </div>
        </hgroup>

        <div class="row">

            <div class="columns small-12 medium-8 clearing-thumbs" data-clearing
                 tal:define="files view/files;"
                 tal:attributes="class python: files and 'columns small-12 medium-8 end' or 'columns small-12 medium-8'" >
              <tal:image_check tal:condition="view/images">
                <tal:first_image tal:define="images view/images;
                                     first_image python: images[0];" >
                  <a tal:attributes="href string:${first_image/absolute_url}/@@images/image.jpeg;" >
                    <figure  class="blog-lead-image helper-margin-bottom-m text-left"
                             tal:define="scales first_image/@@images;" >
                      <img tal:replace="structure python: scales.tag('image', scale='entry_teaser', direction='down', alt=first_image.description, title=first_image.description)" />
                      <figcaption tal:content="first_image/title" tal:condition="first_image/title">Caption</figcaption>
                    </figure>
                  </a>
                </tal:first_image>
              </tal:image_check>
              <ul class="clearing-thumbs clearing-feature small-block-grid-3 medium-block-grid-4 large-block-grid-6 helper-border-bottom helper-margin-bottom-l"
                  tal:condition="view/images"
                  data-clearing >
                <tal:block tal:repeat="image view/images" >
                  <li class="helper-no-padding-left clearing-featured-img"
                      tal:define="first repeat/image/start;"
                      tal:attributes="class python: 'helper-no-padding-left clearing-featured-img' if not first else 'helper-no-padding-left';">
                    <a class="th" role="button" aria-label="Thumbnails"
                       tal:define="scales image/@@images;"
                       tal:attributes="href string:${image/absolute_url}/@@images/image.jpeg;">
                      <img tal:replace="structure python: scales.tag('image', scale='listing_thumb', direction='down')" />
                    </a>
                  </li>
                </tal:block>
              </ul>
              <div tal:replace="structure context/text/output">Content</div>

            </div>
            <div class="columns small-12 medium-4" >
              <div class="panel" tal:condition="view/files" >
                <h3 i18n:translate="">Files</h3>
                <ul class="list-link" >
                  <li tal:repeat="file view/files">
                    <a tal:attributes="href file/absolute_url; title file/description">
                      <span tal:replace="file/title" />
                      <small>(<span tal:replace="python: view.getFileType(file)" />, <span tal:replace="python: view.getFileSize(file)" />)</small>
                    </a>
                  </li>
                </ul>
              </div>
            </div>

          </div>
          <div class="row">
              <section class="columns small-12 medium-8 end">
                <div tal:replace="structure provider:plone.belowcontent" >Viewlets Below</div>
              </section>
          </div>

      </article>

    </div>
  </main>
  </metal:content>
</metal:main>

</body>
</html>
