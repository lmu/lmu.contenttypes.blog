<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="lmu.blog">

<body>

    <metal:content fill-slot="content">
    <div id="content">
      <header id="blog-header">
        <div class="row">
          <div class="columns small-12">
            <h1>
              <span tal:replace="context/title">Blog Titel</span> 
              <small tal:content="context/subtitle" tal:condition="context/subtitle">Blog Sub-Title</small>
            </h1>
            <a class="button"
               tal:define="add_url string:${context/absolute_url}/++add++Blog Entry;"
               tal:attributes="href add_url;
                             class string:button;"
               i18n:translate="">
              Jetzt einen Blog-Beitrag verfassen
            </a>
          </div>
        </div>
      </header>
      <main id="blog-main">
        <tal:block tal:repeat="entry view/entries"
                   tal:define="isAnon context/@@plone_portal_state/anonymous;
                               normalizeString nocall: context/plone_utils/normalizeString;
                               toLocalizedTime nocall: context/@@plone/toLocalizedTime;
                               site_properties context/portal_properties/site_properties;
                               use_view_action site_properties/typesUseViewActionInListings|python:();
                               show_about python:not isAnon or site_properties.allowAnonymousViewAbout;
                               navigation_root_url context/@@plone_portal_state/navigation_root_url;
                               pas_member context/@@pas_member;
                              ">
          <div class="row" 
               tal:define="item entry/getObject;
                           item_creator entry/Creator;
                           item_type entry/portal_type;
                           item_modified entry/ModificationDate;
                           item_url item/getURL|item/absolute_url;">
            <section class="columns small-12 blog-entry" 
                 tal:define="member python:view.get_memberdata(item);
                             text python:view.strip_text(item);
                            ">

              <div class="tileItem visualIEFloatFix">
                  <div class="tileCommentSign">
                    <a class="comment-sign" 
                       tal:content="item/getDiscussionCount"
                       tal:attributes="href python:str(item.absolute_url())+'#commenting';">Anzahl</a>
                  </div>
                  <h2 class="tileHeadline"
                      metal:define-macro="listitem">

                      <a href="#"
                         class="summary url"
                         tal:attributes="href python: item_type in use_view_action and item_url+'/view' or item_url;"
                         tal:content="item/title_or_id">
                          Item Title
                      </a>

                  </h2>

                  <div class="tileDocumentByLine documentByLine" 
                       tal:condition="python: site_properties.allowAnonymousViewAbout or not isAnon"
                       tal:define="author python:pas_member.info(item_creator);">
                    <a href="#"
                       tal:attributes="href string:${navigation_root_url}/author/${item_creator}"
                       tal:content="author/name_or_id"
                       tal:omit-tag="not:author">
                      Bob Dobalina
                    </a>, 
                    <span tal:replace="python: toLocalizedTime(item_modified,long_format=0)">Date</span>

                  </div>
                  <div class="tileBody">
                                      <a href="#"
                     tal:define="real_object python:item.aq_explicit"
                     tal:condition="python:getattr(real_object, 'image', None)"
                     tal:attributes="href python: item_type in use_view_action and item_url+'/view' or item_url">
                    <figure tal:define="images item/@@images;"
                            tal:condition="images/image" >
                      <img tal:replace="structure python: images.tag('image', scale='large',css_class='tileImage', alt=item.image_caption, title=item.image_caption)" />
                      <figcaption tal:content="item/image_caption" tal:condition="item/image_caption">Caption</figcaption>
                    </figure>
                  </a>
                  <tal:tileBody tal:replace="structure item/text/output">
                      Content Body
                  </tal:tileBody>
                  </div>

                  <div class="tileFooter">
                      <a href=""
                         tal:define="url python: item_type in use_view_action and item_url+'/view#commenting' or item_url;"
                         tal:attributes="href string:${url}#commenting;"
                         i18n:translate="read_more">
                      Read Comments&hellip;
                      </a>
                  </div>

                  <div class="visualClear"><!-- --></div>

            </div>
          </section>
        </div>
      </tal:block>
    </main>
    <footer id="blog-footer">
      <div class="row">
        <div class="columns small-12">
          <a class="button"
             tal:define="add_url string:${context/absolute_url}/++add++Blog Entry;"
             tal:attributes="href add_url;
                             class string:button;"
             i18n:translate="">
            Jetzt einen Blog-Beitrag verfassen
          </a>
        </div>
      </div>
    </footer>
    </div>
    </metal:content>

</body>
</html>
